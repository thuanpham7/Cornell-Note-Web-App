<!doctype html>
<html lang = "en">
    <head>
        <meta charset ='utf-8'>
        <title>My note</title>
        <link rel = "stylesheet" href = "/css/note.css">
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
    </head>
    <body>
        <br>
        
        <div class = "container">
            <form action = "/subject/<%=note.subject%>/<%= note._id %>/remove" method = "post">
                <input class = "hid" name = "noteID" value = "<%=noteIDs%>" type = "hidden">
                <button type = "submit" class = "btn btn-outline-info">Delete note</button>
            </form>
            <br>
            <br>
            <form action = "/subject/<%=note.subject%>/note" method = "post" class = "item">
                <input type = "hidden" name = "noteID" value = "<%=noteIDs%>" type = "hidden">
                <% if (note.title === "") { %>
                    <input type="text" name="title" placeholder="Add Title" autocomplete="off">
                <% } else { %>
                    <input type="text" name="title" autocomplete="off" value = "<%= note.title %>">
                <% } %>
                <br>
                <br>
                <br>
                <button type = "submit" class = "btn btn-outline-info">Save note</button>
            </form>
            <p class = "date"><%= date %></p>
            <div class = "row">
                <div class = "col col-lg-4 col-md-5">
                    <div class = "card">
                        <div class = "card-header">Highlights</div>
                            <div class = "card-body insert">
                                <form class = "item" action = '/add-highlight' class = "item" method = "post">
                                    <input class = "hid" name = "noteID" value = "<%=noteIDs%>" type = "hidden">
                                    <input type="text" name="highlight" placeholder="New Item" autocomplete="off">
                                    <button type="submit" name="list">+</button>
                                </form>
                                <div class = "highlight">
                                    <form action = '/remove-highlight' method = 'post'>
                                        <input class = "hid" name = "noteID" value = "<%=noteIDs%>" type = "hidden">
                                            <% if (note.highlights.length !== 0) { %>
                                                <% for (let highlight of note.highlights) { %> 
                                                    <div class = "highlights">
                                                        <input type = "checkbox" name = "checkbox" value = "<%= highlight %>" onChange = "this.form.submit()">
                                                        <p><%= highlight %></p>
                                                    </div>
                                                      
                                                <% } %>
                                            <% } %>
                                    </form>
                                </div>
                            </div>
                    </div>
                </div>
                <div class = "col col-lg-8 col-md-7">
                    <div class = "card">
                        <div class = "card-header">Notes</div>
                        <div class = "card-body insert">
                             <form action = '/add-notes' method = 'post' class="item"> 
                                <input class = "hid" name = "noteID" value = "<%=noteIDs%>" type = "hidden">
                                <input type="text" name="notes" placeholder="New Item" autocomplete="off">
                                <button type="submit" name="list">+</button>
                             </form>
                             <div class = "note">
                                 <form class = "item-val" action = "/remove-note" method = "post">
                                    <input class = "hid" name = "noteID" value = "<%=noteIDs%>" type = "hidden">
                                    <% if (note.notes.length !== 0) { %>
                                            <% for (let high of note.notes) { %>
                                                <div class = "highlights">
                                                    <input type = "checkbox" name = "checkbox" value = "<%= high %>" onChange = "this.form.submit()">
                                                    <p><%= high %></p>
                                                </div> 
                                                
                                            <% } %>
                                        
                                    <% } %>
                                </form>
                             </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class = "row">
                <div class = "col col-lg-12 col-md-12">
                    <div class = "card">
                        <div class = "card-header">Summary</div>
                        <div class = "card-body insert-sum">
                            <form action = '/add-summary' method = 'post' class="item">
                                <input class = "hid" name = "noteID" value = "<%=noteIDs%>" type = "hidden">
                                <input type="text" name="summary" placeholder="New Item" autocomplete="off">
                                <button type="submit" name="list">+</button>
                            </form>
                            <div class = "summary">
                                <form class = "item-val" action = "/remove-summary" method = "post">
                                    <input class = "hid" name = "noteID" value = "<%=noteIDs%>" type = "hidden">
                                    <% if (note.summary.length !== 0) { %>
                                        <% for (let sum of note.summary) { %> 
                                            <div class = "highlights">
                                                <input type = "checkbox" name = "checkbox" value = "<%= sum %>" onChange = "this.form.submit()">
                                                <p><%= sum %></p>
                                            </div>  
                                            
                                        <% } %>
                                    <% } %>
                                </form>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        
        </div>

        <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.2/dist/umd/popper.min.js" integrity="sha384-IQsoLXl5PILFhosVNubq5LC7Qb9DXgDA9i+tQ8Zj3iwWAwPtgFTxbJ8NT4GN1R8p" crossorigin="anonymous"></script>
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.min.js" integrity="sha384-cVKIPhGWiC2Al4u+LWgxfKTRIcfu0JTxR+EQDz/bgldoEyl4H0zUF0QKbrJ0EcQF" crossorigin="anonymous"></script>
    </body>

</html>